package uk.co.ogauthority.pwa.features.webapp.devtools.testharness.filehelper;


import org.apache.commons.codec.DecoderException;
import org.apache.commons.codec.binary.Hex;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.mock.web.MockMultipartFile;
import org.springframework.web.multipart.MultipartFile;

class FileUploadTestHarnessUtil {

  private static final String SAMPLE_IMG_HEX =
      "FFD8FFE000104A46494600010101009000900000FFDB0043000201010201010202020202020202030503030303030604040305070607070706070708090B09080" +
          "80A0807070A0D0A0A0B0C0C0C0C07090E0F0D0C0E0B0C0C0CFFDB004301020202030303060303060C0807080C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C" +
          "0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0CFFC00011080055006103012200021101031101FFC4001F00000105010101010" +
          "10100000000000000000102030405060708090A0BFFC400B5100002010303020403050504040000017D010203000411051221314106135161072271143281" +
          "91A1082342B1C11552D1F02433627282090A161718191A25262728292A3435363738393A434445464748494A535455565758595A636465666768696A73747" +
          "5767778797A838485868788898A92939495969798999AA2A3A4A5A6A7A8A9AAB2B3B4B5B6B7B8B9BAC2C3C4C5C6C7C8C9CAD2D3D4D5D6D7D8D9DAE1E2E3E4" +
          "E5E6E7E8E9EAF1F2F3F4F5F6F7F8F9FAFFC4001F0100030101010101010101010000000000000102030405060708090A0BFFC400B51100020102040403040" +
          "705040400010277000102031104052131061241510761711322328108144291A1B1C109233352F0156272D10A162434E125F11718191A262728292A353637" +
          "38393A434445464748494A535455565758595A636465666768696A737475767778797A82838485868788898A92939495969798999AA2A3A4A5A6A7A8A9AAB" +
          "2B3B4B5B6B7B8B9BAC2C3C4C5C6C7C8C9CAD2D3D4D5D6D7D8D9DAE2E3E4E5E6E7E8E9EAF2F3F4F5F6F7F8F9FAFFDA000C03010002110311003F00FD20A28A" +
          "2BF4C3F9EC28A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A" +
          "28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A00" +
          "28A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A0028A28A00FFD9";

  private static final String FILE_DESCRIPTION = "test harness app file";

  private static final Logger LOGGER = LoggerFactory.getLogger(FileUploadTestHarnessUtil.class);


  private FileUploadTestHarnessUtil() {}


  static MultipartFile getSampleMultipartFile() {

    var byteFileData = new byte[0];

    try {
      byteFileData = Hex.decodeHex(SAMPLE_IMG_HEX);

    } catch (DecoderException e) {
      LOGGER.error("Unable to decode image hex dump");
    }

    var fileName = "test_harness_sample_file_img.jpeg";
    return new MockMultipartFile(fileName, fileName, "image/jpeg", byteFileData);
  }

  public static String getFileDescription() {
    return FILE_DESCRIPTION;
  }
}
